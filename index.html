<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/static/style.css"><!--全体スタイル-->

    <meta name="theme-color" content="#00fff7"><!--スプラッシュ-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!-- スマホ対応 -->
    <title>AREA-BATTLE</title>
    <script  src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> <!--supabaseクライアントをセットアップ。defer:JSはHTML読み終わってから実行してね-->
    <script  src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Google AdSense (広告)-->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6034373340168082"
     crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet"/> <!--全体フォント-->
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="manifest" href="/static/manifest.json"><!--アプリ設定(manifest.js)-->

  </head>

  <body>
    <div id="splash">
      <div class="splash-content">
        <h1 class="splash-title">AREA BATTLE</h1>
        <div class="splash-sub">Loading...</div>
      </div>
    </div>
    <!--タイトル画面-->
    <div id="titleScreen" class="title-screen">

    <h1  class="neon-title" >AREA BATTLE</h1>

    <input id="titlename" class="playerNameInput title-input" type="text" placeholder="PLAYER NAME">

    <div id="nameWarning" class="name-warning">
      ⚠ この名前は一度設定すると変更できません。
    </div>

    <button id="startGameBtn" class="btn title-btn start-btn" onclick="startGame()" >GPS開始<br><span class="start-btn-sub">（ゲストログイン）</span></button>

    <button id="googleLoginBtn" class="btn title-btn">
      <span class="btn-content">
        <img  src="static/google.png" width="20"
            alt="Google" class="google-icon">
        <span>Googleでログイン</span>
      </span>
    </button>

    <!--新規登録・メールログインは一旦保留
    <div class="title-row">
      <button id="emailLoginBtn" class="btn title-btn" onclick="signIn(event)"> ✉ メールでログイン</button>
      <button id="emailSignUpBtn" class="btn title-btn" onclick="signUp(event)">新規登録</button>
    </div>
    -->

    <button id="installBtn" class="btn install-btn">アプリをインストール</button>

    <!--ゲーム説明文-->
    <div class="title-desc">
      <p>Area Battleは、GPSを活用したリアルワールド型の対戦ゲームです。プレイヤーは実際に移動して取得した位置情報をもとにエリアを形成し、その面積の大きさで全国のユーザーと競います。</p>
      <p>移動ルートによって作られる多角形の面積を自動計算し、ランキング形式で結果が表示されます。ログインすると記録が保存され、継続的にランキングへ挑戦できます。</p>
      <p>本サービスは位置情報をゲーム体験の向上のために利用しており、取得したデータは適切に管理されます。また、本ゲームは個人開発により運営されており、安心して利用できる環境づくりを心がけています。</p>
    </div>

    <!--忍者ad-->
    <!-- admax -->
    <div class="ad-area" id="titleAd">
      <script src="https://adm.shinobi.jp/o/7cac4f23f66e3c35678ae719b3d4873d"></script>
    </div>
    <!-- admax -->

    <div class="title-links">
      <a href="/static/privacy.html" class="link-cyan">
        プライバシーポリシー
      </a>
    </div>
    <div class="contact">
      お問い合わせ：areabattle.contact@gmail.com
    </div>
    </div>

    <div class="header">AREA BATTLE</div>
    <div class="container">
    <!--hud:ゲームの上部情報欄-->
      <div class="hud">
        <div id="display-name" class="display-name"></div>
        <div id="result">面積: 0</div>

        <div class ="hud-actions">
          <button id="backToTitleBtn" class="btn" onclick="backToTitle()">タイトルへ戻る</button>
          <button id="resetBtn" class="btn" onclick="resetMap()">リセット</button>
          <button id="logoutBtn" class="btn" onclick="logout()">ログアウト</button>
        </div>


      </div>

      <div id="map"></div>

      <div class="action-buttons">
        <button class="btn title-btn area-scan-btn" onclick="sendArea()">AREA SCAN</button>
      </div>

      <!-- Google AdSense (広告)-->
      <!--<div style="margin:20px 0; text-align:center;">
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-XXXXXXXXXXXX"
            data-ad-slot="1234567890"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
      </div>

      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>-->

      <div id="myRankBox" class="ranking-board my-rankbox">
        <h3>⭐ YOUR RANK</h3>
        <div id="myRank"></div>

        <button id="shareXBtn" class="btn title-btn share-x-btn">
          友達にシェア
        </button>
      </div>


      <div class="ranking-board">
        <!--ランキングのタブ切り替え-->
        <div class="rank-tabs">
          <button class="btn tab-btn is-active" data-range="daily">DAILY</button>
          <button class="btn tab-btn" data-range="weekly">WEEKLY</button>
          <button class="btn tab-btn" data-range="all">ALL</button>
        </div>
        <h3>🏆 SCORE BOARD</h3>
        <div id="ranking"></div>
      </div>

      
      <!-- admax -->
      <div class="ad-area">
        <script src="https://adm.shinobi.jp/o/5f935d7a187da8b007cae1853c67ce1f"></script>
      </div>
      <!-- admax -->

      <footer class="footer">
        <a href="/static/privacy.html" class="link-cyan footer-link">
          プライバシーポリシー
        </a>
        <span>お問い合わせ：areabattle.contact@gmail.com</span>
    </footer>
    </div>

    <script src="/static/auth.js"></script>
    <script src="/static/map.js"></script>
    <script src="/static/ui.js"></script>

    <script>
    if ("serviceWorker" in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register("/static/sw.js")
                .then(reg => console.log("SW registered"))
                .catch(err => console.log("SW error", err));
        });
    }
    </script>

    <!-- スプラッシュスクリーンの制御 -->
    <script>
    window.addEventListener("load", () => {
      const splash = document.getElementById("splash");
      setTimeout(() => {
        splash.classList.add("splash-hide");
        setTimeout(() => splash.remove(), 600);
      }, 1000); // 1秒表示
    });
    </script>

  </body>
 
</html>
